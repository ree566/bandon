/*! bandon 2014-08-14 */

!function(){function a(){c(),g()}function b(){function a(a){k=a.groups,f()}function b(a){alert("取得店家列表失敗！")}function c(a){l=a.floor,f()}function d(a){alert("取得樓層資訊失敗！")}myPost("get-groups","",a,b),myPost("get-floor","",c,d)}function c(){d(),e()}function d(){var a=[];k.forEach(function(b){var c=!1;l.groups.every(function(a){return b.id==a.id?(c=!0,!1):!0});var d=function(a){var b=$(".filter").val();return b?a.name.indexOf(b)>=0?!0:!1:!0}(b);!c&&d&&a.push('<option value="'+b.id+'">'+b.name+"</option>")}),$(".group-list").html(a.join(""))}function e(){var a=[];l.groups.forEach(function(b){a.push('<option value="'+b.id+'">'+b.name+"</option>")}),$(".floor-group-list").html(a.join("")),$(".floor-name").html(l.name)}function f(){k&&l&&a()}function g(){$(".add-group").click(function(){i(),c()}),$(".remove-group").click(function(){j(),c()}),$(".submit").click(h),$(".filter").keyup(d),$(".filter").change(d)}function h(){function a(){alert("儲存成功！")}function b(a){alert("儲存失敗！"+(a.error||""))}var c={floor:l};myPost("set-floor-group",c,a,b,this)}function i(){$(".group-list option:selected").each(function(){var a=$(this).val();k.forEach(function(b){a==b.id&&l.groups.push(b)})})}function j(){$(".floor-group-list option:selected").each(function(){var a=$(this).val();l.groups.forEach(function(b,c){a==b.id&&l.groups.splice(c,1)})})}var k=null,l=null;$(document).ready(b)}();
//# sourceMappingURL=select-group.min.js.map