$(function () {

    $("form").parent().removeClass();

    console.log(floor_id);

    $('.input-daterange').each(function () {
        $(this).datetimepicker({
            collapse: true,
            useCurrent: true,
            // sideBySide: true,
            format: 'YYYY/M/DD HH:mm',
            showClear: true,
            allowInputToggle: true
        });
    });

    $(".submit").on("click", function () {
        if (confirm("確認儲存?")) {

            var c = [];

            function a() {
                alert("儲存成功！");
                location.replace("manage-time-limit.php");
            }

            function b() {
                alert("發生錯誤！");
            }

            $(".group").each(function () {
                var group_id = $(".group_id", this).html();
                var time_limit = $(".input-daterange", this).find("input").val();

                var obj = {
                    group_id: group_id,
                    floor_id: floor_id,
                    time_limit: time_limit
                };

                if (time_limit == "") {
                    delete obj.time_limit;
                }

                c.push(obj);

            });

            var data = {
                groups: c
            };

            console.log(data);
            return myPost("set-time-limit", data, a, b, this);
        }
        return false;
    });

});

