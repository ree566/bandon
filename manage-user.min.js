/*! bandon 2014-08-14 */

!function(){function a(){function a(a){e=a.users,d()}function b(a){alert("取得員工列表失敗！")}myPost("get-users","",a,b)}function b(){var a=[];e.forEach(function(b){var c=T('<tr>				<td><input type="checkbox" data-uid="{user_id}" class="delete-check"></td>				<td>{user_id}</td>				<td>{user_floor}</td>				<td>{user_name}</td>				<td>{user_permission}</td>			</tr>',{user_id:b.id,user_floor:b.floor.name,user_name:b.name,user_permission:b.permission});a.push(c)}),$(".user-list").html(a.join(""))}function c(){$(".nav-tabs a").each(function(){$(this).click(function(){$(this).tab("show")})}),$(".add-user").click(function(){function a(a){e=a.users,alert("儲存成功！"),$(".add-user-list").val(""),b(),$(".tab-delete").tab("show")}function c(a){alert("儲存失敗！")}var d=$(".add-user-list").val(),f={users:[]},g=d.split(/\r?\n/);return g.forEach(function(a){var b=a.split(/\s+/);b[0]&&b[1]&&f.users.push({id:b[0],name:b[1],permission:b[2]||1,floor_id:b[3]||0})}),f.users.length&&myPost("set-users",f,a,c,this),!1}),$(".delete-user").click(function(){function a(a){alert("儲存成功！"),e=a.users,b()}function c(a){alert("儲存失敗！")}var d={users:[]};return $(".delete-check:checked").each(function(){d.users.push({id:$(this).data("uid"),"delete":!0})}),d=JSON.stringify(d),myPost("set-users",d,a,c,this),!1})}function d(){b(),c()}var e=null;$(document).ready(a)}();
//# sourceMappingURL=manage-user.min.js.map